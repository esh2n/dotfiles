# 🚀 Neovim Complete Configuration Guide

このガイドでは、カスタマイズされたNeovim設定の全機能とショートカットを説明します。

## 📋 目次

1. [基本設定](#基本設定)
2. [リーダーキー](#リーダーキー)
3. [ファイル操作](#ファイル操作)
4. [ナビゲーション](#ナビゲーション)
5. [検索と置換](#検索と置換)
6. [コード編集](#コード編集)
7. [LSP機能](#lsp機能)
8. [Git操作](#git操作)
9. [ターミナル](#ターミナル)
10. [デバッグ](#デバッグ)
11. [UI機能](#ui機能)
12. [プラグイン別ガイド](#プラグイン別ガイド)

---

## 🎯 基本設定

- **Leader Key**: `<Space>` (スペースキー)
- **Local Leader**: `\`
- **カラースキーム**: Catppuccin
- **フォント**: Nerd Font必須
- **相対行番号**: 有効
- **タブ幅**: 2スペース

---

## ⌨️ リーダーキー

リーダーキー（`<Space>`）を押した後、少し待つとwhich-keyが使用可能なコマンドを表示します。

---

## 📁 ファイル操作

### ファイル管理

| キー | 動作 | 説明 |
|------|------|------|
| `<Space>e` | Neo-treeトグル | ファイルエクスプローラーの表示/非表示 |
| `-` | Oil.nvim | 現在のディレクトリをバッファとして編集 |
| `<Space>w` | ファイル保存 | 現在のファイルを保存 |
| `<Space>q` | バッファを閉じる | 現在のバッファを閉じる |

### バッファ操作

| キー | 動作 | 説明 |
|------|------|------|
| `<Tab>` | 次のバッファ | バッファタブを右に移動 |
| `<S-Tab>` | 前のバッファ | バッファタブを左に移動 |
| `<S-h>` | 前のバッファ | 代替キー |
| `<S-l>` | 次のバッファ | 代替キー |
| `<Space>bd` | バッファ削除 | 現在のバッファを削除 |
| `<Space>bp` | バッファ選択 | インタラクティブにバッファを選択 |
| `<Space>bc` | バッファクローズ選択 | 閉じるバッファを選択 |

### Harpoonファイルマーク

| キー | 動作 | 説明 |
|------|------|------|
| `<Space>ha` | ファイルを追加 | 現在のファイルをHarpoonに追加 |
| `<Space>hh` | Harpoonメニュー | マークしたファイル一覧を表示 |
| `<M-1>` | ファイル1へ移動 | Alt+1でマークしたファイル1へ |
| `<M-2>` | ファイル2へ移動 | Alt+2でマークしたファイル2へ |
| `<M-3>` | ファイル3へ移動 | Alt+3でマークしたファイル3へ |
| `<M-4>` | ファイル4へ移動 | Alt+4でマークしたファイル4へ |

---

## 🧭 ナビゲーション

### 基本移動

| キー | 動作 | 説明 |
|------|------|------|
| `h/j/k/l` | 左/下/上/右 | 基本的なカーソル移動 |
| `gg` | ファイルの先頭 | |
| `G` | ファイルの末尾 | |
| `0` | 行頭 | |
| `$` | 行末 | |
| `w/b` | 単語単位で前/後 | |

### Flash.nvim (高速ジャンプ)

| キー | 動作 | 説明 |
|------|------|------|
| `s` | Flash ジャンプ | 画面内にラベルを表示して高速移動 |
| `S` | Flash Treesitter | Treesitterノードベースのジャンプ |

### テキストオブジェクト移動

| キー | 動作 | 説明 |
|------|------|------|
| `]m` | 次の関数へ | |
| `[m` | 前の関数へ | |
| `]]` | 次のクラスへ | |
| `[[` | 前のクラスへ | |
| `]a` | 次のパラメータへ | |
| `[a` | 前のパラメータへ | |

### ウィンドウ移動

| キー | 動作 | 説明 |
|------|------|------|
| `<C-h>` | 左のウィンドウ | |
| `<C-j>` | 下のウィンドウ | |
| `<C-k>` | 上のウィンドウ | |
| `<C-l>` | 右のウィンドウ | |

---

## 🔍 検索と置換

### Telescope (ファジーファインダー)

| キー | 動作 | 説明 |
|------|------|------|
| `<Space>ff` | ファイル検索 | プロジェクト内のファイルを検索 |
| `<Space>fg` | Grep検索 | プロジェクト内のテキストを検索 |
| `<Space>fb` | バッファ検索 | 開いているバッファから検索 |
| `<Space>fh` | ヘルプ検索 | Vimのヘルプを検索 |
| `<Space>fr` | 履歴検索 | 最近開いたファイル |
| `<Space>fn` | 通知履歴 | nvim-notifyの通知履歴 |

### Spectre (高度な検索置換)

| キー | 動作 | 説明 |
|------|------|------|
| `<Space>sr` | Spectreトグル | 検索置換パネルを開く |
| `<Space>sw` | 現在の単語を検索 | カーソル下の単語で検索開始 |
| `<Space>sp` | ファイル内検索 | 現在のファイル内のみ検索 |

### 基本的な検索

| キー | 動作 | 説明 |
|------|------|------|
| `/` | 前方検索 | |
| `?` | 後方検索 | |
| `n` | 次の検索結果 | |
| `N` | 前の検索結果 | |
| `*` | カーソル下の単語を検索 | |

---

## ✏️ コード編集

### 基本編集

| キー | 動作 | 説明 |
|------|------|------|
| `u` | アンドゥ | |
| `<C-r>` | リドゥ | |
| `dd` | 行削除 | |
| `yy` | 行コピー | |
| `p` | ペースト | |
| `<` | 左インデント（ビジュアルモード） | 選択を維持 |
| `>` | 右インデント（ビジュアルモード） | 選択を維持 |

### テキストオブジェクト操作

| キー | 動作 | 説明 |
|------|------|------|
| `vaf` | 関数全体を選択 | |
| `vif` | 関数内部を選択 | |
| `vac` | クラス全体を選択 | |
| `vic` | クラス内部を選択 | |
| `vaa` | パラメータを選択 | |
| `via` | パラメータ内部を選択 | |

### コメント

| キー | 動作 | 説明 |
|------|------|------|
| `gcc` | 行コメントトグル | mini.commentによる |
| `gc` + motion | 範囲コメントトグル | 例: `gcap` でパラグラフ |

### 自動補完（Blink.cmp）

| キー | 動作 | 説明 |
|------|------|------|
| `<C-y>` | 補完を確定 | |
| `<Tab>` | 次の候補 | |
| `<S-Tab>` | 前の候補 | |
| `<C-Space>` | 補完メニュー表示 | |

---

## 🛠️ LSP機能

### 基本的なLSP操作

| キー | 動作 | 説明 |
|------|------|------|
| `gd` | 定義へジャンプ | |
| `gr` | 参照を表示 | |
| `gI` | 実装へジャンプ | |
| `<Space>D` | 型定義へジャンプ | |
| `K` | ホバー情報 | |
| `<Space>rn` | リネーム | |
| `<Space>ca` | コードアクション | |

### 診断

| キー | 動作 | 説明 |
|------|------|------|
| `[d` | 前の診断へ | |
| `]d` | 次の診断へ | |
| `<Space>df` | 診断をフロート表示 | |

### Trouble (診断パネル)

| キー | 動作 | 説明 |
|------|------|------|
| `<Space>xx` | 診断パネルトグル | プロジェクト全体の診断 |
| `<Space>xX` | バッファ診断 | 現在のバッファの診断のみ |
| `<Space>cs` | シンボル一覧 | |
| `<Space>cl` | LSP参照/定義 | |

---

## 🔀 Git操作

### Gitsigns

| キー | 動作 | 説明 |
|------|------|------|
| `]h` | 次の変更へ | |
| `[h` | 前の変更へ | |
| `<Space>hs` | 変更をステージ | |
| `<Space>hr` | 変更をリセット | |
| `<Space>hp` | 変更をプレビュー | |
| `<Space>hb` | 行のblame情報 | |

### LazyGit

| キー | 動作 | 説明 |
|------|------|------|
| `<Space>gg` | LazyGitを開く | フローティングウィンドウでGit操作 |

---

## 💻 ターミナル

### ToggleTerm

| キー | 動作 | 説明 |
|------|------|------|
| `<C-\>` | ターミナルトグル | フローティングターミナル |
| `<Esc>` | ターミナルを閉じる | ターミナル内で |
| `jk` | Normalモードへ | ターミナル内で |

---

## 🐛 デバッグ

### DAP (Debug Adapter Protocol)

| キー | 動作 | 説明 |
|------|------|------|
| `<F1>` | ステップバック | |
| `<F2>` | ステップオーバー | |
| `<F3>` | ステップイン | |
| `<F4>` | ステップアウト | |
| `<F5>` | 続行 | |
| `<F7>` | ブレークポイント設定/解除 | |
| `<Space>B` | 条件付きブレークポイント | |

---

## 🎨 UI機能

### 通知

すべての通知は`nvim-notify`で美しく表示されます。
- `<Space>fn` で通知履歴を確認

### ミニマップ

右端にコードのミニマップが表示され、以下が可視化されます：
- カーソル位置
- 検索結果
- Git変更
- 診断情報

### バッファライン

画面上部にタブとして表示されるバッファ
- マウスクリック対応
- 診断情報アイコン表示

---

## 📦 プラグイン別ガイド

### Neo-tree (ファイルエクスプローラー)

Neo-tree内での操作：
- `<CR>` - ファイル/フォルダを開く
- `a` - 新規作成
- `d` - 削除
- `r` - リネーム
- `y` - コピー
- `x` - カット
- `p` - ペースト
- `R` - リフレッシュ
- `.` - 隠しファイルトグル

### Oil.nvim (バッファベースファイル管理)

- `-` - 親ディレクトリを開く
- `<CR>` - ファイル/ディレクトリを開く
- `g?` - ヘルプ表示
- 通常の編集コマンドでファイル名を変更可能

### which-key.nvim

`<Space>`を押して少し待つと、利用可能なキーバインドが表示されます。

### TODO Comments

コード内の特別なコメント：
- `TODO:` - やるべきこと
- `FIXME:` - 修正が必要
- `HACK:` - 一時的な対処
- `WARN:` - 警告
- `PERF:` - パフォーマンス
- `NOTE:` - 注記

`<Space>ft`でTODOコメントを検索

---

## 💡 Tips

1. **どのキーを押せばいいか分からないとき**
   - `<Space>`を押して待つ（which-key）
   - `:Telescope keymaps`でキーマップ検索

2. **設定をカスタマイズしたいとき**
   - `~/.config/nvim/lua/custom/plugins/`にファイルを追加
   - 自動的に読み込まれる

3. **新しい言語のサポートを追加**
   - `:Mason`でLSPサーバーをインストール
   - init.luaのserversテーブルに追加

4. **パフォーマンスが気になる場合**
   - `:Lazy profile`でプラグインの起動時間を確認

5. **エラーが出た場合**
   - `:checkhealth`で環境診断
   - `:messages`でエラーメッセージ確認

---

## 🎨 追加プラグイン

### render-markdown.nvim
Markdownファイルの表示を大幅に強化します。
- ヘッダーにアイコンと背景色
- コードブロックの強調表示
- チェックボックスのアイコン化
- リンクのアイコン表示

### octo.nvim (GitHub統合)
NeovimからGitHubのIssueやPRを操作できます。

- `<Space>gi` - GitHub Issueの一覧表示
- `<Space>gp` - GitHub PRの一覧表示
- `<Space>gr` - PRレビューを開始
- `:Octo pr create` - 新しいPRを作成
- `:Octo issue create` - 新しいIssueを作成

### copilot.lua (GitHub Copilot)
AIによるコード補完を提供します。

**インサートモード**：
- `<M-l>` または `<Alt-l>` - 提案を受け入れる
- `<M-]>` または `<Alt-]>` - 次の提案
- `<M-[>` または `<Alt-[>` - 前の提案
- `<C-]>` - 提案を却下
- `<M-CR>` または `<Alt-Enter>` - Copilotパネルを開く

### vim-fugitive (Git統合)
Gitコマンドを直接Neovim内で実行できます。

- `<Space>gs` - Git status
- `<Space>gb` - Git blame
- `<Space>gd` - Git diff split
- `<Space>ge` - Git edit
- `<Space>gr` - Git read
- `<Space>gw` - Git write
- `<Space>gl` - Git log
- `<Space>gp` - Git push (注意: octo.nvimのPRリストと競合)
- `<Space>gP` - Git pull
- `<Space>gc` - Git commit

### vim-kensaku (日本語検索)
日本語の曖昧検索が可能になります。

- `<Space>sk` - Kensaku検索開始
- コマンドモードで `<CR>` - 検索語句を自動変換

### vim-asterisk (検索拡張)
より賢い`*`検索を提供します。

- `*` / `#` - 通常の検索（カーソル位置を保持）
- `g*` / `g#` - 部分一致検索
- `z*` / `z#` - カーソル位置を画面中央に

### marks.nvim (マーク可視化)
マークが左側に表示され、管理しやすくなります。

- `mx` - マークxを設定
- `'x` - マークxへジャンプ
- `dmx` - マークxを削除
- `m,` - 次の利用可能なマークを設定
- `m;` - 次のマークへトグル

### hlargs.nvim (引数ハイライト)
関数の引数が自動的にハイライトされます（設定不要）。

### nvim_context_vt (コンテキスト表示)
長い関数やブロックで、現在のコンテキストを仮想テキストで表示します。

### jumpcursor.vim (カーソル復元)
ファイルを再度開いた時、前回のカーソル位置を自動復元します。

### nvim-ts-context-commentstring (コメント強化)
JSX、TSX、Vue等でコンテキストに応じた正しいコメント形式を使用します。

### Denopsプラグイン (要Deno)
Denoがインストールされている場合：
- **denops-popup-preview.vim** - 補完時のポップアッププレビュー
- **denops-signature_help** - 関数シグネチャのヘルプ表示
